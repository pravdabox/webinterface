// Generated by CoffeeScript 1.12.3
(function() {
  var P;

  P = window.P || {};

  P.ws_endpoint = 'ws://192.168.42.1/ws-bin';

  P.dns = function() {
    var c, maxlen, ws;
    ws = new WebSocket(P.ws_endpoint + '/dns');
    maxlen = 10;
    c = 0;
    return ws.onmessage = function(event) {
      $('<div class="l l-' + c + '">' + event.data + '</div>').prependTo('.filter-dns');
      if ($('.filter-dns .l').length > maxlen) {
        $('.filter-dns .l-' + (c - maxlen)).remove();
      }
      return c++;
    };
  };

  P.connections = function() {
    var c, maxlen, ws;
    ws = new WebSocket(P.ws_endpoint + '/connections');
    maxlen = 10;
    c = 0;
    return ws.onmessage = function(event) {
      $('<div class="l l-' + c + '">' + event.data + '</div>').prependTo('.filter-connections');
      if ($('.filter-connections .l').length > maxlen) {
        $('.filter-connections .l-' + (c - maxlen)).remove();
      }
      return c++;
    };
  };

  P.http = function() {
    var c, maxlen, ws;
    ws = new WebSocket(P.ws_endpoint + '/http');
    maxlen = 10;
    c = 0;
    return ws.onmessage = function(event) {
      $('<div class="l l-' + c + '">' + event.data + '</div>').prependTo('.filter-http');
      if ($('.filter-http .l').length > maxlen) {
        $('.filter-http .l-' + (c - maxlen)).remove();
      }
      return c++;
    };
  };

  P.cookies = function() {
    var c, maxlen, ws;
    ws = new WebSocket(P.ws_endpoint + '/cookies');
    maxlen = 10;
    c = 0;
    return ws.onmessage = function(event) {
      $('<div class="l l-' + c + '">' + event.data + '</div>').prependTo('.filter-cookies');
      if ($('.filter-cookies .l').length > maxlen) {
        $('.filter-cookies .l-' + (c - maxlen)).remove();
      }
      return c++;
    };
  };

  P.images = function() {
    var c, maxlen, ws;
    ws = new WebSocket(P.ws_endpoint + '/images');
    maxlen = 30;
    c = 0;
    return ws.onmessage = function(event) {
      $('<a href="/image/' + event.data + '" target="_blank"><img class="i i-' + c + '" src="/image/' + event.data + '"></a>').prependTo('.filter-images');
      if ($('.filter-images .i').length > maxlen) {
        $('.filter-images .i-' + (c - maxlen)).remove();
      }
      return c++;
    };
  };

  $(function() {
    P.dns();
    P.connections();
    P.http();
    P.cookies();
    return P.images();
  });

}).call(this);
